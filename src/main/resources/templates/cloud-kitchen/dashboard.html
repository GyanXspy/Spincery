<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Kitchen Dashboard - Spincery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-gradient-to-r from-purple-600 to-purple-800 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-cloud-kitchen text-2xl"></i>
                    <span class="text-xl font-bold">Spincery</span>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/" class="hover:text-purple-200 transition-colors">
                        <i class="fas fa-home mr-2"></i>Home
                    </a>
                    <a href="/cloud-kitchen/meal-plans" class="hover:text-purple-200 transition-colors">
                        <i class="fas fa-list mr-2"></i>Meal Plans
                    </a>
                    <a href="/cloud-kitchen/subscriptions" class="hover:text-purple-200 transition-colors">
                        <i class="fas fa-users mr-2"></i>Subscriptions
                    </a>
                    <form th:action="@{/logout}" method="post" class="inline">
                        <button type="submit" class="hover:text-purple-200 transition-colors">
                            <i class="fas fa-sign-out-alt mr-2"></i>Logout
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Welcome Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Cloud Kitchen Dashboard</h1>
                    <p class="text-gray-600 mt-2">Welcome back! Manage your cloud kitchen operations here.</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-500">Today's Date</div>
                    <div class="text-lg font-semibold text-gray-900" th:text="${#dates.format(#dates.createNow(), 'dd MMM yyyy')}">15 Jan 2024</div>
                </div>
            </div>
        </div>

        <!-- Add Cloud Kitchen Button -->
        <div class="mb-6 flex justify-end">
            <a href="/cloud-kitchen/register" class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                <i class="fas fa-plus mr-2"></i>Add Cloud Kitchen
            </a>
        </div>

        <!-- Kitchen Selector (if multiple kitchens) -->
        <div th:if="${kitchens != null and #lists.size(kitchens) > 1}" class="mb-6">
            <label for="kitchenSelect" class="block text-sm font-medium text-gray-700 mb-2">Select Kitchen:</label>
            <select id="kitchenSelect" class="p-2 border rounded" onchange="updateKitchenLinks()">
                <option th:each="kitchen : ${kitchens}" th:value="${kitchen.id}" th:text="${kitchen.kitchenName}"></option>
            </select>
        </div>
        <script>
        function updateKitchenLinks() {
            var kitchenId = document.getElementById('kitchenSelect').value;
            document.getElementById('mealPlansLink').href = '/cloud-kitchen/' + kitchenId + '/meal-plans';
            document.getElementById('settingsLink').href = '/cloud-kitchen/settings?kitchenId=' + kitchenId;
            document.getElementById('scheduleLink').href = '/cloud-kitchen/schedule?kitchenId=' + kitchenId;
            document.getElementById('deliveryLink').href = '/cloud-kitchen/delivery?kitchenId=' + kitchenId;
        }
        window.addEventListener('DOMContentLoaded', function() {
            if(document.getElementById('kitchenSelect')) updateKitchenLinks();
        });
        </script>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                        <i class="fas fa-users text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Active Subscriptions</p>
                        <p class="text-2xl font-bold text-gray-900">42</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-green-100 text-green-600">
                        <i class="fas fa-dollar-sign text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Monthly Revenue</p>
                        <p class="text-2xl font-bold text-gray-900">â‚¹28,450</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                        <i class="fas fa-star text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Rating</p>
                        <p class="text-2xl font-bold text-gray-900">4.7</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                        <i class="fas fa-utensils text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Meal Plans</p>
                        <p class="text-2xl font-bold text-gray-900">8</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-utensils text-2xl text-purple-600 mr-3"></i>
                    <h3 class="text-lg font-semibold text-gray-900">Meal Plans</h3>
                </div>
                <p class="text-gray-600 mb-4">Create and manage meal plans for your customers.</p>
                <a th:if="${kitchens != null and #lists.size(kitchens) > 0}" th:href="@{'/cloud-kitchen/' + ${kitchens[0].id} + '/meal-plans'}" href="#" id="mealPlansLink" class="inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                    <i class="fas fa-plus mr-2"></i>Manage Plans
                </a>
                <a th:if="${kitchens == null or #lists.isEmpty(kitchens)}" href="#" id="mealPlansLink" class="inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg opacity-50 cursor-not-allowed" disabled>
                    <i class="fas fa-plus mr-2"></i>Manage Plans
                </a>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-users text-2xl text-green-600 mr-3"></i>
                    <h3 class="text-lg font-semibold text-gray-900">Subscriptions</h3>
                </div>
                <p class="text-gray-600 mb-4">View and manage customer subscriptions.</p>
                <a href="/cloud-kitchen/subscriptions" class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                    <i class="fas fa-eye mr-2"></i>View Subscriptions
                </a>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-chart-bar text-2xl text-blue-600 mr-3"></i>
                    <h3 class="text-lg font-semibold text-gray-900">Analytics</h3>
                </div>
                <p class="text-gray-600 mb-4">View detailed analytics and performance metrics.</p>
                <a href="/cloud-kitchen/analytics" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    <i class="fas fa-chart-line mr-2"></i>View Analytics
                </a>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-cog text-2xl text-gray-600 mr-3"></i>
                    <h3 class="text-lg font-semibold text-gray-900">Settings</h3>
                </div>
                <p class="text-gray-600 mb-4">Update kitchen information and preferences.</p>
                <a th:if="${kitchens != null and #lists.size(kitchens) > 0}" th:href="@{'/cloud-kitchen/settings?kitchenId=' + ${kitchens[0].id}}" href="#" id="settingsLink" class="inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-wrench mr-2"></i>Settings
                </a>
                <a th:if="${kitchens == null or #lists.isEmpty(kitchens)}" href="#" id="settingsLink" class="inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg opacity-50 cursor-not-allowed" disabled>
                    <i class="fas fa-wrench mr-2"></i>Settings
                </a>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-clock text-2xl text-orange-600 mr-3"></i>
                    <h3 class="text-lg font-semibold text-gray-900">Schedule</h3>
                </div>
                <p class="text-gray-600 mb-4">Manage your kitchen's operating schedule.</p>
                <a th:if="${kitchens != null and #lists.size(kitchens) > 0}" th:href="@{'/cloud-kitchen/schedule?kitchenId=' + ${kitchens[0].id}}" href="#" id="scheduleLink" class="inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">
                    <i class="fas fa-calendar mr-2"></i>Set Schedule
                </a>
                <a th:if="${kitchens == null or #lists.isEmpty(kitchens)}" href="#" id="scheduleLink" class="inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg opacity-50 cursor-not-allowed" disabled>
                    <i class="fas fa-calendar mr-2"></i>Set Schedule
                </a>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-truck text-2xl text-red-600 mr-3"></i>
                    <h3 class="text-lg font-semibold text-gray-900">Delivery</h3>
                </div>
                <p class="text-gray-600 mb-4">Configure delivery settings and zones.</p>
                <a th:if="${kitchens != null and #lists.size(kitchens) > 0}" th:href="@{'/cloud-kitchen/delivery?kitchenId=' + ${kitchens[0].id}}" href="#" id="deliveryLink" class="inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                    <i class="fas fa-map-marker-alt mr-2"></i>Delivery Settings
                </a>
                <a th:if="${kitchens == null or #lists.isEmpty(kitchens)}" href="#" id="deliveryLink" class="inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg opacity-50 cursor-not-allowed" disabled>
                    <i class="fas fa-map-marker-alt mr-2"></i>Delivery Settings
                </a>
            </div>
        </div>

        <!-- Recent Subscriptions -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-900">Recent Subscriptions</h2>
                <a href="/cloud-kitchen/subscriptions" class="text-purple-600 hover:text-purple-700 font-medium">
                    View All <i class="fas fa-arrow-right ml-1"></i>
                </a>
            </div>

            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Plan</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Start Date</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">John Doe</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Weekly Veg Plan</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">7 days</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">â‚¹1,200</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Active</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Today</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Jane Smith</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Monthly Premium</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">30 days</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">â‚¹4,500</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Tomorrow</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Mike Johnson</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Daily Plan</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1 day</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">â‚¹200</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">Completed</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Yesterday</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <p>&copy; 2024 Spincery. All rights reserved.</p>
            </div>
        </div>
    </footer>
</body>
</html> 